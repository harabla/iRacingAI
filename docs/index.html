<!DOCTYPE html>
<html>

<head>
<meta charset="UTF-8">
<title>aiReiska</title>
<link rel="stylesheet" href="css/style.css">
</head>

<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyB5-lkeChuEgkJ0UXYbf6WUP33fIBNYVdA",
    authDomain: "iracingai.firebaseapp.com",
    databaseURL: "https://iracingai-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "iracingai",
    storageBucket: "iracingai.appspot.com",
    messagingSenderId: "536602400542",
    appId: "1:536602400542:web:4b9b883f22e2d10e209b0f",
    measurementId: "G-0JDJ6BRKJE"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);

import {getDatabase, get, ref, child, set, update, onValue} from "https://www.gstatic.com/firebasejs/9.17.1/firebase-database.js";


const db = getDatabase();



const dbref = ref(db);






// Cardata


onValue(child(dbref, "Team 1/Race 1/cardata"), (snapshot) => {
  snapshot.forEach((childSnapshot) => {
    var childKey = childSnapshot.key;
    var childData = childSnapshot.val();
    console.log(childKey);
    console.log(childData);
    var childKeyFixed = childKey.toString;

    document.getElementById(childKey).innerText = childData;

  });
}, {
});

// backend


onValue(child(dbref, "Team 1/Race 1/backend"), (snapshot) => {
  snapshot.forEach((childSnapshot) => {
    var childKey = childSnapshot.key;
    var childData = childSnapshot.val();
    console.log(childKey);
    console.log(childData);
    var childKeyFixed = childKey.toString;

    document.getElementById(childKey).innerText = childData;

  });
}, {
});

// interface


onValue(child(dbref, "Team 1/Race 1/interface"), (snapshot) => {
  snapshot.forEach((childSnapshot) => {
    var childKey = childSnapshot.key;
    var childData = childSnapshot.val();
    console.log(childKey);
    console.log(childData);
    var childKeyFixed = childKey.toString;

    document.getElementById(childKey).innerText = childData;

  });
}, {
});

// prerace


onValue(child(dbref, "Team 1/Race 1/prerace"), (snapshot) => {
  snapshot.forEach((childSnapshot) => {
    var childKey = childSnapshot.key;
    var childData = childSnapshot.val();
    console.log(childKey);
    console.log(childData);
    var childKeyFixed = childKey.toString;

    document.getElementById(childKey).innerText = childData;

  });
}, {
});


</script>

<body>

<h2>Car data</h2>
                <table id="cardata" width="100%">
                    <tr  style="background: #cccccc;">
                      <th id="fieldTest">Kentän nimi</th>
                      <th>Kentän sisältö</th>
                    </tr>
                    <tr>
                        <th>ABS</th>
                        <th><p id="ABS"></p></th>
                    </tr>
                    <tr>
                        <th>Position</th>
                        <th><p id="Position"></p></th>
                    </tr>
                    <tr>
                        <th>RPM</th>
                        <th><p id="RPM"></p></th>
                    </tr>

                </table>

<h2>Backend</h2>
                <table id="backend" width="100%">
                    <tr  style="background: #cccccc;">
                      <th id="fieldTest">Kentän nimi</th>
                      <th>Kentän sisältö</th>
                    </tr>
                    <tr>
                        <th>Next Stint End Time</th>
                        <th><p id="next_stint_end_time"></p></th>
                    </tr>
                </table>


<h2>Interface</h2>
                <table id="interface" width="100%">
                    <tr  style="background: #cccccc;">
                      <th id="fieldTest">Kentän nimi</th>
                      <th>Kentän sisältö</th>
                    </tr>
                    <tr>
                        <th>Last Stint End Time</th>
                        <th><p id="stint_end_time"></p></th>
                    </tr>
                    <tr>
                        <th>Stint End Reason</th>
                        <th><p id="stint_end_reason"></p></th>
                    </tr>
                </table>


<h2>Prerace</h2>
                <table id="prerace" width="100%">
                    <tr  style="background: #cccccc;">
                      <th id="fieldTest">Kentän nimi</th>
                      <th>Kentän sisältö</th>
                    </tr>
                    <tr>
                        <th>Avg. Laptime</th>
                        <th><p id="avg_lap_time"></p></th>
                    </tr>
                    <tr>
                        <th>Fuel per lap</th>
                        <th><p id="fuel_per_lap"></p></th>
                    </tr>
                    <tr>
                        <th>Fuel tank size</th>
                        <th><p id="fuel_tank_size"></p></th>
                    </tr>
                    <tr>
                        <th>Pit Stop Lost Time</th>
                        <th><p id="pit_stop_lost_time"></p></th>
                    </tr>
                    <tr>
                        <th>Race Duration</th>
                        <th><p id="race_duration"></p></th>
                    </tr>
                </table>
</body>

</html>
